"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FirebaseProduct=void 0;var FirebaseProduct={template:"",data:function(){return{searchText:"",product:{name:"",price:null},isEdit:!1,products:[],sort:"id",isAsc:!0,currentPage:1,pageSize:3}},beforeCreate:function(){},created:function(){console.log("created"),this.getProducts()},computed:{productsFilter:function(){var t=this.pageSize*(this.currentPage-1),e=t+this.pageSize;return this.searchProductsByAll(this.searchText).slice(t,e)}},methods:{getProducts:function(){var e=this;db.collection("products").orderBy("id").get().then(function(t){e.products=t.docs.map(function(t){return t.data()})})},searchProductsByAll:function(r){return this.products.filter(function(t){for(var e in t)if(String(t[e]).toLowerCase().includes(r.toLowerCase()))return t})},addProduct:function(e){var r=this;db.collection("products").orderBy("id","desc").limit(1).get().then(function(t){t.forEach(function(t){e.id=String(Number(t.data().id)+1),e.price=Number(e.price),r.products.push(_.cloneDeep(e)),db.collection("products").add(e)})})},removeProduct:function(t){this.products.splice(this.products.indexOf(t),1),db.collection("products").where("id","==",t.id).get().then(function(t){t.forEach(function(t){t.ref.delete()})})},editProducts:function(t){var e=this,r=db.batch(),o=0;db.collection("products").orderBy(this.sort).get().then(function(t){t.forEach(function(t){r.set(t.ref,e.products[o]),o++}),r.commit().then(function(){return console.log("batch commit success(editProducts)")}).catch(function(t){return console.log("error",t)})})},sortProducts:function(t){this.sort=t,this.isAsc=!this.isAsc;var r=this.sort,o=this.isAsc;this.products=this.products.sort(function(t,e){return o?t[r]>e[r]?1:-1:t[r]<e[r]?1:-1})},totalPage:function(){return Math.ceil(this.searchProductsByAll(this.searchText).length/this.pageSize)}}};exports.FirebaseProduct=FirebaseProduct;