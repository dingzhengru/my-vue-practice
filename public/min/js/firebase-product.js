"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ProductFirebase=void 0;var ProductFirebase={template:"",data:function(){return{searchText:"",product:{name:"",price:null},isEdit:!1,products:[],sort:"id"}},beforeCreate:function(){},created:function(){console.log("created"),this.getProducts()},computed:{productsFilter:function(){return this.searchProductsByAll(this.searchText)}},methods:{getProducts:function(){var e=this;db.collection("products").orderBy("id").get().then(function(t){e.products=t.docs.map(function(t){return t.data()})})},searchProductsByAll:function(o){return this.products.filter(function(t){for(var e in t)if(String(t[e]).toLowerCase().includes(o.toLowerCase()))return t})},addProduct:function(t){t.id=String(this.products.length),this.products.push(_.cloneDeep(t)),db.collection("products").add(t)},removeProduct:function(t){this.products.splice(this.products.indexOf(t),1),db.collection("products").where("id","==",t.id).get().then(function(t){t.forEach(function(t){t.ref.delete()})})},editProducts:function(t){var e=this,o=db.batch(),r=0;db.collection("products").orderBy("id").get().then(function(t){t.forEach(function(t){o.set(t.ref,e.products[r]),r++}),o.commit().then(function(){return console.log("batch commit success(editProducts)")}).catch(function(t){return console.log("error",t)})})}}};exports.ProductFirebase=ProductFirebase;